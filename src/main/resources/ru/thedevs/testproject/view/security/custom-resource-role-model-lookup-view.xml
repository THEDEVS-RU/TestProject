<view xmlns="http://jmix.io/schema/flowui/view"
      title="Roles"
      focusComponent="entitiesTree">

    <data readOnly="true">
        <collection id="entitiesDc"
                    class="ru.thedevs.testproject.dto.RoleGroupNode"/>
    </data>

    <facets>
        <settings auto="true"/>
    </facets>

    <actions>
        <action id="selectAction" type="lookup_select"/>
        <action id="discardAction" type="lookup_discard"/>
    </actions>

    <layout expand="entitiesTree">

        <!-- 🔍 Фильтр по имени роли -->
        <textField id="nameFilter"
                   placeholder="Поиск по имени роли..."
                   width="100%"/>

        <!-- 🔽 Фильтр по категории -->
        <comboBox id="categoryFilter"
                  placeholder="Категория"
                  clearButtonVisible="true"
                  width="100%"/>

        <!-- 🌳 TreeDataGrid для ролей и их политик -->
        <treeDataGrid id="entitiesTree"
                      dataContainer="entitiesDc"
                      hierarchyProperty="children"
                      selectionMode="MULTI"
                      width="100%"
                      minHeight="30em">

            <columns>
                <column property="enabled"
                        header="Вкл"
                        editable="true"/>

                <column property="name"
                        header="Название"/>

                <column property="category"
                        header="Категория"
                        editable="true"/>
            </columns>
        </treeDataGrid>



        <hbox id="lookupActions" visible="false">
            <button id="selectBtn" action="selectAction"/>
            <button id="discardBtn" action="discardAction"/>
        </hbox>
    </layout>
</view>
